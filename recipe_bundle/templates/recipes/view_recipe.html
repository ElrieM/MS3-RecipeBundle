{% extends "base.html" %}
{% block content %}

<div class="container">
    <h1 class="text-center">{{ recipe.recipe_name }}</h1>
    <div class="row" id="recipe-card">
        <div class="col-md-5">
            <div class="row">
                <p class="col">Total time: {{ recipe.total_time }}</p>
                <p class="col">Active time: {{ recipe.active_time }}</p>
            </div>
            <img id="recipe-image" src=" {{ recipe.img_url }}">
            <div class="container-flex">
                <p>Meal type: {{ recipe.type }}</p>
                <p>Diet: {{ recipe.diet }}</p>
                <p>Cuisine: {{ recipe.cuisine }}</p>
            </div>
        </div>
        <div class="col col-md-7">
            <div class="container">
                <!-- Button to edit recipe page -->
                <a href="{{ url_for('recipes.edit_recipe', recipe_id=recipe._id)}}" class="btn-small">
                    <button class="btn btn-primary">Edit</button>
                </a>
                <!-- Button to edit recipe page -->
                <button class="btn btn-primary" onclick="document.getElementById('deleteModal').style.display='block'">
                    Delete
                </button>
                <!-- Popup modal to confirm before deleting -->
                <!-- Adapted from https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_delete_modal -->
                <div id="deleteModal" class="modal">
                    <span onclick="document.getElementById('deleteModal').style.display='none'" class="close"
                        title="Close Modal">Ã—</span>
                    <form class="modal-content">
                        <div class="container">
                            <div class="modal-header">
                                <h1>Delete Recipe</h1>
                            </div>
                            <p>Are you sure you want to delete this recipe?</p>
                            <div class="modal-footer">
                                <div class="clearfix">
                                    <button type="button"
                                        onclick="document.getElementById('deleteModal').style.display='none'"
                                        class="cancelbtn">Cancel</button>
                                    <a href="{{ url_for('recipes.delete_recipe', recipe_id=recipe._id)}}"
                                        class="btn btn-primary">Delete</a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!-- Accordion containing ingredients in one block and method in the other -->
            <!-- Adapted from https://getbootstrap.com/docs/5.1/components/accordion/ -->
            <div class="accordion" id="recipeAccordion">
                <div class="accordion-item active">
                    <h2 class="accordion-header" id="recipeIngrHeading">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#recipeIngr" aria-expanded="true" aria-controls="recipeIngr">
                            Ingredients
                        </button>
                    </h2>
                    <div id="recipeIngr" class="accordion-collapse collapse show" aria-labelledby="recipeIngrHeading"
                        data-bs-parent="#recipeAccordion">
                        <div class="accordion-body" id="ingr_list">
                            <ul>
                                {% for ingredient in recipe.ingredients %}
                                <li>{{ ingredient }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="recipeMethodHeading">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#recipeMethod" aria-expanded="false" aria-controls="recipeMethod">
                            Method
                        </button>
                    </h2>
                    <div id="recipeMethod" class="accordion-collapse collapse" aria-labelledby="recipeMethodHeading"
                        data-bs-parent="#recipeAccordion">
                        <div class="accordion-body">
                            <ol>
                                {% for step in recipe.method %}
                                <li>{{ step }}</li>
                                {% endfor %}
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}